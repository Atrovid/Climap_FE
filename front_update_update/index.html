<html>
    <head>
        <title></title>
        <style>
            body { margin: 0; }
            canvas { width: 100%; height: 100% }

            #mapid {
            height: 500px;
            width: 500px; /* Largeur rectangulaire */

            }
            

        </style>




        <script src='./temperatureMap.js'></script>
        <script src='./temperatureMap.js'></script>
        <!-- Inclure le CSS Leaflet -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

        <!-- Inclure le JavaScript Leaflet -->
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

        <!-- Inclure Leaflet Heatmap -->
        <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

        <script>
        var jsonData = [
        {
        "latitude": 49.1776480572306,
        "longitude": -0.377200659280793,
        "sound": [
        {
        "decibel": 23.2844451361611
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.0538877414828
        }
        ],
        "idCharacteristic": 326,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 40.4479167137133
        }
        ],
        "dateDataCapture": "2023-03-11T15:44:46.453+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 72.4127075230334
        }
        ],
        "brightness": [
        {
        "lux": 69.5616393245316
        }
        ]
        },
        {
        "latitude": 49.1617859960064,
        "longitude": -0.413778559603839,
        "sound": [
        {
        "decibel": 67.9175137618672
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.0392523883377
        }
        ],
        "idCharacteristic": 327,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 30.58909235394
        }
        ],
        "dateDataCapture": "2023-09-11T15:44:46.478+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 77.7894292264981
        }
        ],
        "brightness": [
        {
        "lux": 11.1334988143818
        }
        ]
        },
        {
        "latitude": 49.174589756543,
        "longitude": -0.293401276137598,
        "sound": [
        {
        "decibel": 6.7805701676282
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.6729931578465
        }
        ],
        "idCharacteristic": 328,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 63.7403571314369
        }
        ],
        "dateDataCapture": "2023-07-15T15:44:46.490+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 52.7210454822605
        }
        ],
        "brightness": [
        {
        "lux": 12.3442215214136
        }
        ]
        },
        {
        "latitude": 49.1917335447809,
        "longitude": -0.394266497264413,
        "sound": [
        {
        "decibel": 24.9866775741242
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.7659149204728
        }
        ],
        "idCharacteristic": 329,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 52.4398613277781
        }
        ],
        "dateDataCapture": "2023-03-04T15:44:46.502+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 14.3689629644973
        }
        ],
        "brightness": [
        {
        "lux": 28.0220568917897
        }
        ]
        },
        {
        "latitude": 49.2136178937819,
        "longitude": -0.417874170426777,
        "sound": [
        {
        "decibel": 54.2656638120566
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.5539851181144
        }
        ],
        "idCharacteristic": 330,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 1.20549093197485
        }
        ],
        "dateDataCapture": "2023-06-20T15:44:46.514+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 50.4900403213238
        }
        ],
        "brightness": [
        {
        "lux": 76.3177440990143
        }
        ]
        },
        {
        "latitude": 49.2315830787938,
        "longitude": -0.395857720103106,
        "sound": [
        {
        "decibel": 76.9624675097886
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.2724359971343
        }
        ],
        "idCharacteristic": 331,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 23.5269282216292
        }
        ],
        "dateDataCapture": "2023-06-17T15:44:46.525+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 24.9749046610701
        }
        ],
        "brightness": [
        {
        "lux": 47.2991923756779
        }
        ]
        },
        {
        "latitude": 49.1319700579472,
        "longitude": -0.404382073534024,
        "sound": [
        {
        "decibel": 22.838603289833
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.1671641006471
        }
        ],
        "idCharacteristic": 332,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 83.1010466326769
        }
        ],
        "dateDataCapture": "2024-01-05T15:44:46.536+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 25.850670515027
        }
        ],
        "brightness": [
        {
        "lux": 20.7178487461205
        }
        ]
        },
        {
        "latitude": 49.1859849928321,
        "longitude": -0.419059690895691,
        "sound": [
        {
        "decibel": 62.4519974702359
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.7417311471829
        }
        ],
        "idCharacteristic": 333,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 75.1338890532256
        }
        ],
        "dateDataCapture": "2023-12-09T15:44:46.547+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 72.7213330086358
        }
        ],
        "brightness": [
        {
        "lux": 26.2777906051302
        }
        ]
        },
        {
        "latitude": 49.1968339074685,
        "longitude": -0.274963643119759,
        "sound": [
        {
        "decibel": 60.976928125429
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.041721728954
        }
        ],
        "idCharacteristic": 334,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 68.0499846323887
        }
        ],
        "dateDataCapture": "2023-03-14T15:44:46.557+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 83.1697035194404
        }
        ],
        "brightness": [
        {
        "lux": 19.2706455981232
        }
        ]
        },
        {
        "latitude": 49.1459011693152,
        "longitude": -0.279148515128936,
        "sound": [
        {
        "decibel": 39.9028143001676
        }
        ],
        "heat": [
        {
        "celsiusDegree": 11.9931214791722
        }
        ],
        "idCharacteristic": 335,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 2.74071125648566
        }
        ],
        "dateDataCapture": "2023-07-30T15:44:46.569+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 73.7461148854083
        }
        ],
        "brightness": [
        {
        "lux": 61.6924062106251
        }
        ]
        },
        {
        "latitude": 49.2114465514417,
        "longitude": -0.290716687883,
        "sound": [
        {
        "decibel": 17.8673553121459
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.1273904130246
        }
        ],
        "idCharacteristic": 336,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 73.6762802514315
        }
        ],
        "dateDataCapture": "2023-08-04T15:44:46.581+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 58.8997655272884
        }
        ],
        "brightness": [
        {
        "lux": 79.6128855918659
        }
        ]
        },
        {
        "latitude": 49.1822683253149,
        "longitude": -0.416612745718728,
        "sound": [
        {
        "decibel": 84.2972910860536
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.6003308033894
        }
        ],
        "idCharacteristic": 337,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 60.384301231432
        }
        ],
        "dateDataCapture": "2023-02-15T15:44:46.592+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 35.3440054621344
        }
        ],
        "brightness": [
        {
        "lux": 0.281459596402944
        }
        ]
        },
        {
        "latitude": 49.158612125603,
        "longitude": -0.378249816475332,
        "sound": [
        {
        "decibel": 18.3017507696439
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.4334059781594
        }
        ],
        "idCharacteristic": 338,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 46.4701342361619
        }
        ],
        "dateDataCapture": "2023-10-08T15:44:46.603+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 63.6798053612452
        }
        ],
        "brightness": [
        {
        "lux": 9.39003834920503
        }
        ]
        },
        {
        "latitude": 49.1689775876695,
        "longitude": -0.277038609013738,
        "sound": [
        {
        "decibel": 43.9648594168441
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.9864185242884
        }
        ],
        "idCharacteristic": 339,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 5.79449544239244
        }
        ],
        "dateDataCapture": "2023-03-18T15:44:46.617+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 71.0707553717237
        }
        ],
        "brightness": [
        {
        "lux": 67.0042814453096
        }
        ]
        },
        {
        "latitude": 49.1391830556735,
        "longitude": -0.347510322440911,
        "sound": [
        {
        "decibel": 17.5139307300294
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.6209850279185
        }
        ],
        "idCharacteristic": 340,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 55.3037705914594
        }
        ],
        "dateDataCapture": "2023-06-23T15:44:46.631+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 66.7086841199848
        }
        ],
        "brightness": [
        {
        "lux": 81.9315451826146
        }
        ]
        },
        {
        "latitude": 49.151852285823,
        "longitude": -0.350090267580554,
        "sound": [
        {
        "decibel": 48.5302104633699
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.580488534315
        }
        ],
        "idCharacteristic": 341,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 10.1747648950911
        }
        ],
        "dateDataCapture": "2023-07-14T15:44:46.644+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 21.3795223933067
        }
        ],
        "brightness": [
        {
        "lux": 69.318704217858
        }
        ]
        },
        {
        "latitude": 49.147504492174,
        "longitude": -0.335492343412917,
        "sound": [
        {
        "decibel": 8.33255962909362
        }
        ],
        "heat": [
        {
        "celsiusDegree": 11.4194623930843
        }
        ],
        "idCharacteristic": 342,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 15.760797543713
        }
        ],
        "dateDataCapture": "2023-03-13T15:44:46.657+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 22.5339306393461
        }
        ],
        "brightness": [
        {
        "lux": 52.3416244353305
        }
        ]
        },
        {
        "latitude": 49.2247420390092,
        "longitude": -0.286066684393606,
        "sound": [
        {
        "decibel": 54.7758192045214
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.6704915620698
        }
        ],
        "idCharacteristic": 343,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 53.2525607248759
        }
        ],
        "dateDataCapture": "2023-09-16T15:44:46.669+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 14.0717163528879
        }
        ],
        "brightness": [
        {
        "lux": 28.0149888539453
        }
        ]
        },
        {
        "latitude": 49.2128876271394,
        "longitude": -0.268950798298767,
        "sound": [
        {
        "decibel": 79.6904282548634
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.9156365167361
        }
        ],
        "idCharacteristic": 344,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 11.0926146540561
        }
        ],
        "dateDataCapture": "2023-01-22T15:44:46.683+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 90.3584499372301
        }
        ],
        "brightness": [
        {
        "lux": 65.197763619592
        }
        ]
        },
        {
        "latitude": 49.188536393063,
        "longitude": -0.335486672590071,
        "sound": [
        {
        "decibel": 3.96500624428524
        }
        ],
        "heat": [
        {
        "celsiusDegree": 11.1323029395872
        }
        ],
        "idCharacteristic": 345,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 83.0455138123832
        }
        ],
        "dateDataCapture": "2023-06-04T15:44:46.696+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 27.2159423499158
        }
        ],
        "brightness": [
        {
        "lux": 6.82058030229666
        }
        ]
        },
        {
        "latitude": 49.1680743663206,
        "longitude": -0.375392318418467,
        "sound": [
        {
        "decibel": 33.4862932244943
        }
        ],
        "heat": [
        {
        "celsiusDegree": 12.3927958943713
        }
        ],
        "idCharacteristic": 346,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 53.3130496601104
        }
        ],
        "dateDataCapture": "2023-08-14T15:44:46.709+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 54.060854750687
        }
        ],
        "brightness": [
        {
        "lux": 18.9931270789391
        }
        ]
        },
        {
        "latitude": 49.231087428916,
        "longitude": -0.355320547750721,
        "sound": [
        {
        "decibel": 96.7322697584136
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.6795500573523
        }
        ],
        "idCharacteristic": 347,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 81.3549815281433
        }
        ],
        "dateDataCapture": "2023-11-11T15:44:46.721+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 28.2592474747431
        }
        ],
        "brightness": [
        {
        "lux": 27.3110554599265
        }
        ]
        },
        {
        "latitude": 49.2052715919373,
        "longitude": -0.288982798698196,
        "sound": [
        {
        "decibel": 13.1632153211249
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.7731987181614
        }
        ],
        "idCharacteristic": 348,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 44.24541593952
        }
        ],
        "dateDataCapture": "2023-12-11T15:44:46.733+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 84.2519569908633
        }
        ],
        "brightness": [
        {
        "lux": 87.5857069851053
        }
        ]
        },
        {
        "latitude": 49.2337930154474,
        "longitude": -0.382870757611649,
        "sound": [
        {
        "decibel": 52.5248755413514
        }
        ],
        "heat": [
        {
        "celsiusDegree": 11.1023390656342
        }
        ],
        "idCharacteristic": 349,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 92.2384490392498
        }
        ],
        "dateDataCapture": "2023-07-06T15:44:46.744+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 22.1006653528772
        }
        ],
        "brightness": [
        {
        "lux": 98.6380107341346
        }
        ]
        },
        {
        "latitude": 49.2285817619481,
        "longitude": -0.293090694974434,
        "sound": [
        {
        "decibel": 75.1814439974442
        }
        ],
        "heat": [
        {
        "celsiusDegree": 10.5806684131327
        }
        ],
        "idCharacteristic": 350,
        "microparticle": [
        {
        "particlesPerCubicCentimeter": 18.0189219421991
        }
        ],
        "dateDataCapture": "2023-04-12T15:44:46.755+00:00",
        "humidity": [
        {
        "relativeHumidityPercentage": 80.0073599852065
        }
        ],
        "brightness": [
        {
        "lux": 1.64739163944642
        }
        ]
        }
        ];

        </script>
    </head>
    <body >
        <div id="mapid"></div>
        <canvas id='cns0' width='500' height='500' style="display:none;"></canvas>
    
        <script>
            function run(dataType) {
                // Initialiser la carte Leaflet
                var mymap = L.map('mapid').setView([49.183399, -0.350020], 11.5);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: '© OpenStreetMap contributors'
                }).addTo(mymap);
    
                // Préparation et dessin de la TemperatureMap sur le canvas
                var can0 = document.getElementById("cns0"),
                    ctx0 = can0.getContext("2d"),
                    drw0 = new TemperatureMap(ctx0);
                    drw0.setPointsFromJSON(jsonData, 500, 500, dataType);
                    drw0.drawLow(5, 8, false, function () {
                    drw0.drawPoints(dataType, function() {
                        var imageUrl = can0.toDataURL();
                        var imageBounds = [[49.128039, -0.43499], [49.238, -0.265388]];
                        L.imageOverlay(imageUrl, imageBounds).addTo(mymap); 
                    });
                }, dataType);
                    
                // Ajouter les données à la heatmap (si nécessaire)
                var heatData = [
                    [49.180, -0.370, 0.6],
                    [49.185, -0.360, 0.4],
                    [49.190, -0.350, 0.7],
                    [49.195, -0.340, 0.5],
                    [49.200, -0.330, 0.8]
                ];
                var heat = L.heatLayer(heatData, {
                    radius: 25,
                    blur: 15,
                    maxZoom: 17,
                }).addTo(mymap);
            }

        document.addEventListener('DOMContentLoaded', function() {
        run('brightness');
    });
        </script>
    </body>
    </html>
    